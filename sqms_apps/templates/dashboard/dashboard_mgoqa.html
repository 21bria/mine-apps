<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    {% include 'layout-new/head.html' %}
</head>

<body x-data="main" class="relative overflow-x-hidden font-nunito text-sm font-normal antialiased"
    :class="[ $store.app.sidebar ? 'toggle-sidebar' : '', $store.app.theme === 'dark' || $store.app.isDarkMode ?  'dark' : '', $store.app.menu, $store.app.layout,$store.app.rtlClass]">
    <!-- sidebar menu overlay -->
    <div x-cloak="" class="fixed inset-0 z-50 bg-[black]/60 lg:hidden" :class="{'hidden' : !$store.app.sidebar}"
        @click="$store.app.toggleSidebar()"></div>

    <!-- screen loader -->
    <div
        class="screen_loader animate__animated fixed inset-0 z-[60] grid place-content-center bg-[#fafafa] dark:bg-[#060818]">
        <svg width="64" height="64" viewbox="0 0 135 135" xmlns="http://www.w3.org/2000/svg" fill="#4361ee">
            <path
                d="M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z">
                <animatetransform attributename="transform" type="rotate" from="0 67 67" to="-360 67 67" dur="2.5s"
                    repeatcount="indefinite"></animatetransform>
            </path>
            <path
                d="M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z">
                <animatetransform attributename="transform" type="rotate" from="0 67 67" to="360 67 67" dur="8s"
                    repeatcount="indefinite"></animatetransform>
            </path>
        </svg>
    </div>

    <!-- scroll to top button -->
    <div class="fixed bottom-6 z-50 ltr:right-6 rtl:left-6" x-data="scrollToTop">
        <template x-if="showTopButton">
            <button type="button"
                class="btn btn-outline-primary animate-pulse rounded-full bg-[#fafafa] p-2 dark:bg-[#060818] dark:hover:bg-primary"
                @click="goToTop">
                <svg width="24" height="24" class="h-4 w-4" viewbox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path opacity="0.5" fill-rule="evenodd" clip-rule="evenodd"
                        d="M12 20.75C12.4142 20.75 12.75 20.4142 12.75 20L12.75 10.75L11.25 10.75L11.25 20C11.25 20.4142 11.5858 20.75 12 20.75Z"
                        fill="currentColor"></path>
                    <path
                        d="M6.00002 10.75C5.69667 10.75 5.4232 10.5673 5.30711 10.287C5.19103 10.0068 5.25519 9.68417 5.46969 9.46967L11.4697 3.46967C11.6103 3.32902 11.8011 3.25 12 3.25C12.1989 3.25 12.3897 3.32902 12.5304 3.46967L18.5304 9.46967C18.7449 9.68417 18.809 10.0068 18.6929 10.287C18.5768 10.5673 18.3034 10.75 18 10.75L6.00002 10.75Z"
                        fill="currentColor"></path>
                </svg>
            </button>
        </template>
    </div>

    <!-- start theme customizer section -->
    {% include 'layout-new/customizer.html' %}
    <!-- end theme customizer section -->

    <div class="main-container min-h-screen text-black dark:text-white-dark" :class="[$store.app.navbar]">
        <!-- start sidebar section -->
        {% include 'layout-new/sidebar.html' %}
        <!-- end sidebar section -->

        <div class="main-content flex flex-col min-h-screen">
            <!-- start header section -->
            {% include 'layout-new/header.html' %}
            <!-- end header section -->

            <div class="animate__animated p-6" :class="[$store.app.animation]">
                <div x-data="finance">
                    <!-- Menampilkan nama pengguna yang login -->
                    <div class="mt-4 text-lg text-gray-600  dark:text-white-dark">
                        <!-- Welcome, {{ user.first_name }} {{ user.last_name }}! -->
                        <!-- Jika hanya ingin menampilkan nama pengguna (username) -->
                        <div class="mt-4 text-lg text-gray-600 dark:text-white-dark"> Welcome, {{ user.first_name }}
                        </div>
                    </div>
                    <div class="mb-5 flex items-center">
                        <!-- <h5 class="text-lg font-semibold dark:text-white-light">Mtd - Ore Class</h5> -->
                        <div x-data="form" class="dropdown ltr:ml-auto rtl:mr-auto">
                            <div class="inline-flex">
                                <div>
                                    <select id="filter_year" name="filter_year" class="form-select text-white-dark">
                                        <option value="">-- Year --</option>
                                    </select>
                                </div>

                                <div class="dropdown">
                                    <select id="filter_month" name="filter_month" class="form-select text-white-dark">
                                        <option value="">Month</option>
                                        <option value="1">Januari</option>
                                        <option value="2">Februari</option>
                                        <option value="3">Maret</option>
                                        <option value="4">April</option>
                                        <option value="5">Mei</option>
                                        <option value="6">Juni</option>
                                        <option value="7">Juli</option>
                                        <option value="8">Agustus</option>
                                        <option value="9">September</option>
                                        <option value="10">Oktober</option>
                                        <option value="11">November</option>
                                        <option value="12">Desember</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Card Top -->
                    {% include 'dashboard/mgoqa/view_top.html' %}
                </div>
                <!-- Call Grade Ytd -->
                {% include 'dashboard/mgoqa/view_grade_ytd.html' %}

                <!-- Call View Ore Year to Date -->
                {% include 'dashboard/mgoqa/view_ore_ytd.html' %}

                <!-- Call Grade Mtd -->
                {% include 'dashboard/mgoqa/view_grade_mtd.html' %}

                <!-- Call View Ore Month to Date -->
                {% include 'dashboard/mgoqa/view_ore_mtd.html' %}
                <!-- Call Sample -->
                {% include 'dashboard/mgoqa/view_samples.html' %}

                <!-- Call Stockpile -->
                {% include 'dashboard/mgoqa/view_ore_stockpile.html' %}

            </div>

            <!-- start footer section -->
            <div class="p-6 pt-0 mt-auto text-center dark:text-white-dark ltr:sm:text-left rtl:sm:text-right">
                © <span id="footer-year">2022</span>. SQMS All rights reserved.
            </div>
            <!-- end footer section -->
        </div>
    </div>

    <!-- JAVASCRIPT -->
    {% include "layout-new/js.html" %}


    <script>
        // main section
        document.addEventListener('alpine:init', () => {
            // content section
            Alpine.data('finance', () => ({
                init() {
                    isDark = this.$store.app.theme === 'dark' || this.$store.app.isDarkMode ? true : false;
                    isRtl = this.$store.app.rtlClass === 'rtl' ? true : false;
                    const dailyOreChart = null;
                    const saleByCategory = null;
                    const oreYear = null;
                    const oreClassYear = null;
                    const oreTotalMtd = null;
                    const oreTotalYtd = null;
                    const oreClassMtd = null;
                    const sampleYear = null;
                    const stockpile_hpal = null;
                    const stockpile_rkef = null;
                    const forecastWeek = null;
                    const sampleMonth = null;
                    const totalSampleWeeks = null;
                    const sampleDays = null;


                    // Pass Header Token
                    $.ajaxSetup({
                        headers: {
                            "X-CSRFToken": $('meta[name="csrf-token"]').attr("content"),
                        },
                    });

                    // Fetch year options for ore
                    $.ajax({
                        url: "{% url 'get-year-ore' %}",
                        method: "GET",
                        dataType: "json",
                        success: (data) => {
                            let options = "";
                            $.each(data.tahun_pds, (key, value) => {
                                options += `<option value="${value.tahun}">${value.tahun}</option>`;
                            });
                            $("#filter_year").append(options);
                        },
                    });

                    // Fetch year options for sale
                    $.ajax({
                        url: "{% url 'get-year-sale' %}",
                        method: "GET",
                        dataType: "json",
                        success: (data) => {
                            let options = "";
                            $.each(data.tahun, (key, value) => {
                                options += `<option value="${value.tahun}">${value.tahun}</option>`;
                            });
                            $("#filter_year_sale").append(options);
                            $("#filter_mtd_sale").append(options);
                        },
                    });


                    this.fetchOrePtd();

                    // Fetch initial data and update chart
                    this.fetchData();
                    this.fetchSalePtd();
                    this.fetchClassOre();
                    this.fetchLim();
                    this.fetchSap();
                    this.fetchGrade();
                    this.fetchYtdOre();
                    this.fetchMtdOre();
                    this.fetchMtdGrade();
                    this.dailyChartClass();
                    this.dailyChart();
                    this.sampleYtdChart();
                    this.sampleMtdChart();
                    this.sampleWeekChart();
                    this.fetchStockpileHpal();
                    this.fetchStockpileRkef();
                    // forecast
                    this.fetchforecastWeek();

                    this.oreYear = new ApexCharts(this.$refs.oreYear, this.barOptions);
                    this.$refs.oreYear.innerHTML = '';
                    this.oreYear.render();

                    this.oreClassYear = new ApexCharts(this.$refs.oreClassYear, this.oreClassOptions);
                    this.$refs.oreClassYear.innerHTML = '';
                    this.oreClassYear.render();

                    this.oreTotalYtd = new ApexCharts(this.$refs.oreTotalYtd, this.donutChartOptions);
                    this.$refs.oreTotalYtd.innerHTML = '';
                    this.oreTotalYtd.render();

                    this.dailyOreChart = new ApexCharts(this.$refs.dailyOreChart, this.dailyChartOptions);
                    this.$refs.dailyOreChart.innerHTML = '';
                    this.dailyOreChart.render();

                    this.oreClassMtd = new ApexCharts(this.$refs.oreClassMtd, this.barOptions);
                    this.$refs.oreClassMtd.innerHTML = '';
                    this.oreClassMtd.render();

                    this.oreTotalMtd = new ApexCharts(this.$refs.oreTotalMtd, this.donutChartOptions);
                    this.$refs.oreClassMtd.innerHTML = '';
                    this.oreTotalMtd.render();

                    this.sampleYear = new ApexCharts(this.$refs.sampleYear, this.barOptions);
                    this.$refs.sampleYear.innerHTML = '';
                    this.sampleYear.render();

                    this.stockpile_hpal = new ApexCharts(this.$refs.stockpile_hpal, this.barOptionsHorizontal);
                    this.$refs.stockpile_hpal.innerHTML = '';
                    this.stockpile_hpal.render();

                    this.stockpile_rkef = new ApexCharts(this.$refs.stockpile_rkef, this.barOptionsHorizontal);
                    this.$refs.stockpile_rkef.innerHTML = '';
                    this.stockpile_rkef.render();

                    this.forecastWeek = new ApexCharts(this.$refs.forecastWeek, this.dailyChartOptions);
                    this.$refs.forecastWeek.innerHTML = '';
                    this.forecastWeek.render();

                    // daily samples
                    this.sampleMonth = new ApexCharts(this.$refs.sampleMonth, this.weekChartOptions);
                    this.$refs.sampleMonth.innerHTML = '';
                    this.sampleMonth.render();

                    //total visit
                    this.totalSampleWeeks = new ApexCharts(this.$refs.totalSampleWeeks, this.sampleWeeksOptions);
                    this.totalSampleWeeks.render();

                    this.sampleDays = new ApexCharts(this.$refs.sampleDays, this.samplesDaysOptions);
                    this.sampleDays.render();

                    // Watch for theme changes
                    this.$watch('$store.app.theme', () => {
                        this.isDark = this.$store.app.theme === 'dark' || this.$store.app.isDarkMode ? true : false;
                        this.updateChartTheme();
                    });

                    // Watch for RTL changes
                    this.$watch('$store.app.rtlClass', () => {
                        this.isRtl = this.$store.app.rtlClass === 'rtl' ? true : false;
                        this.updateChartTheme();
                    });

                    // Fetch data when filter changes
                    document.getElementById('filter_year').addEventListener('change', (event) => {
                        const selectedYear = event.target.value;
                        const selectedMonth = $("#filter_month").val();;
                        // const filter = { filter_year: selectedYear };
                        const filter = {
                            filter_year: selectedYear,
                            filter_month: selectedMonth
                        };
                        this.fetchData(filter);
                        this.fetchClassOre(filter);
                        this.fetchLim(filter);
                        this.fetchSap(filter);
                        this.fetchGrade(filter);
                        this.fetchYtdOre(filter);
                        this.sampleYtdChart(filter);
                        this.fetchStockpileHpal(filter);
                        this.fetchStockpileRkef(filter);

                        // Mtd
                        this.dailyChartClass(filter);
                        this.fetchMtdOre(filter);
                        this.fetchMtdGrade(filter)
                        this.sampleMtdChart(filter)
                    });

                    document.getElementById('filter_month').addEventListener('change', (event) => {
                        const selectedMonth = event.target.value;
                        const selectedYear = $("#filter_year").val();;
                        const filter = {
                            filter_year: selectedYear,
                            filter_month: selectedMonth
                        };
                        this.dailyChartClass(filter);
                        this.fetchMtdOre(filter);
                        this.fetchMtdGrade(filter);
                        this.sampleMtdChart(filter);
                    });

                    document.getElementById('oreDate').addEventListener('change', (event) => {
                        const selectedDate = event.target.value;
                        const filter = { filter_days: selectedDate };
                        this.dailyChart(filter);
                    });

                },

                fetchOrePtd() {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-ore-ptd" %}',
                        success: function (data) {
                            // createLim(data)
                            var data_hpal = data.data_hpal;
                            var data_rkef = data.data_rkef;
                            var total_ore = data.total_ore;
                            var total = total_ore.reduce((acc, curr) => acc + curr, 0); // Hitung total data

                            var rkef_percentage = 0;
                            var hpal_percentage = 0;

                            // Periksa apakah total tidak nol sebelum menghitung persentase
                            if (total !== 0) {
                                rkef_percentage = (data_rkef / total) * 100;
                                hpal_percentage = (data_hpal / total) * 100;
                            }

                            // $("#lim_ptd").html(
                            //     data_hpal.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );
                            // $("#sap_ptd").html(
                            //     data_rkef.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );
                            // $("#total_ptd").html(
                            //     total_ore.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );
                            // Fungsi untuk memformat angka
                            function formatAngka(jumlah) {
                                if (jumlah >= 1_000_000_000) {
                                    return (jumlah / 1_000_000_000).toFixed(3) + ' B';
                                } else if (jumlah >= 1_000_000) {
                                    return (jumlah / 1_000_000).toFixed(3) + ' M';
                                } else if (jumlah >= 1_000) {
                                    return (jumlah / 1_000).toFixed(3) + ' K';
                                } else {
                                    return jumlah.toString();
                                }
                            }

                            $("#lim_ptd").html(formatAngka(data_hpal));
                            $("#sap_ptd").html(formatAngka(data_rkef));
                            $("#total_ptd").html(formatAngka(total));

                            $("#lim_ptd_perc").html(hpal_percentage.toFixed(1) + '%');
                            $("#sap_ptd_perc").html(rkef_percentage.toFixed(1) + '%');

                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                fetchSalePtd() {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-sale-ptd" %}',
                        success: function (data) {
                            // createLim(data)
                            var data_hpal = data.data_hpal;
                            var data_rkef = data.data_rkef;
                            var total_sale = data.total_sale;
                            var total = total_sale.reduce((acc, curr) => acc + curr, 0); // Hitung total data

                            var rkef_percentage = 0;
                            var hpal_percentage = 0;

                            // Periksa apakah total tidak nol sebelum menghitung persentase
                            if (total !== 0) {
                                rkef_percentage = (data_rkef / total) * 100;
                                hpal_percentage = (data_hpal / total) * 100;
                            }

                            function formatAngka(jumlah) {
                                if (jumlah >= 1_000_000_000) {
                                    return (jumlah / 1_000_000_000).toFixed(3) + ' B';
                                } else if (jumlah >= 1_000_000) {
                                    return (jumlah / 1_000_000).toFixed(3) + ' M';
                                } else if (jumlah >= 1_000) {
                                    return (jumlah / 1_000).toFixed(3) + ' K';
                                } else {
                                    return jumlah.toString();
                                }
                            }

                            $("#hpal_ptd").html(formatAngka(data_hpal));
                            $("#rkef_ptd").html(formatAngka(data_rkef));
                            $("#sale_ptd").html(formatAngka(total_sale));


                            // $("#hpal_ptd").html(
                            //     data_hpal.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );
                            // $("#rkef_ptd").html(
                            //     data_rkef.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );
                            // $("#sale_ptd").html(
                            //     total_sale.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );

                            $("#hpal_ptd_perc").html(hpal_percentage.toFixed(1) + '%');
                            $("#rkef_ptd_perc").html(rkef_percentage.toFixed(1) + '%');

                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                fetchLim(filter = {}) {
                    // Your AJAX call to fetch Lim data
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-total-lim" %}',
                        data: filter,
                        success: function (data) {
                            // createLim(data)
                            var data_hpal = data.data_hpal;
                            var data_ni = data.data_ni;
                            // var formattedTotal = data_hpal.toLocaleString('en-US', {
                            //     maximumFractionDigits: 2
                            // });
                            // $("#total_hpal").html(formattedTotal);
                            $("#ni_lim").html(" Ni : " + data_ni);
                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                fetchSap(filter = {}) {
                    // Your AJAX call to fetch Sap data
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-total-sap" %}',
                        data: filter,
                        success: function (data) {
                            // createLim(data)
                            var data_rkef = data.data_rkef;
                            var data_ni = data.data_ni;
                            $("#ni_sap").html(" Ni : " + data_ni);
                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                fetchGrade(filter = {}) {
                    // Your AJAX call to fetch Sap data
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-grade-ytd-hpal" %}',
                        data: filter,
                        success: function (data) {
                            var data_Ni = data.hpal_Ni;
                            var data_Co = data.hpal_Co;
                            var data_Al2O3 = data.hpal_Al2O3;
                            var data_Cr2O3 = data.hpal_Cr2O3;
                            var data_Fe = data.hpal_Fe;
                            var data_Mgo = data.hpal_Mgo;
                            var data_SiO2 = data.hpal_SiO2;
                            var data_Mc = data.hpal_Mc;
                            $("#hpal_Ni").html(data_Ni);
                            $("#hpal_Co").html(data_Co);
                            $("#hpal_Al2O3").html(data_Al2O3);
                            // $("#hpal_Cr2O3").html(data_Cr2O3);
                            $("#hpal_Fe").html(data_Fe);
                            $("#hpal_Mgo").html(data_Mgo);
                            $("#hpal_SiO2").html(data_SiO2);
                            $("#hpal_Mc").html(data_Mc);
                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });

                    $.ajax({
                        type: "GET",
                        url: '{% url "get-grade-ytd-rkef" %}',
                        data: filter,
                        success: function (data) {
                            var data_Ni = data.rkef_Ni;
                            var data_Co = data.rkef_Co;
                            var data_Al2O3 = data.rkef_Al2O3;
                            var data_Cr2O3 = data.rkef_Cr2O3;
                            var data_Fe = data.rkef_Fe;
                            var data_Mgo = data.rkef_Mgo;
                            var data_SiO2 = data.rkef_SiO2;
                            var data_Mc = data.rkef_Mc;
                            $("#rkef_Ni").html(data_Ni);
                            $("#rkef_Co").html(data_Co);
                            $("#rkef_Al2O3").html(data_Al2O3);
                            // $("#rkef_Cr2O3").html(data_Cr2O3);
                            $("#rkef_Fe").html(data_Fe);
                            $("#rkef_Mgo").html(data_Mgo);
                            $("#rkef_SiO2").html(data_SiO2);
                            $("#rkef_Mc").html(data_Mc);
                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                fetchYtdOre(filter = {}) {
                    // Your AJAX call to fetch Ytd Ore data
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-ytd-ore" %}',
                        data: filter,
                        success: (data) => {
                            const data_rkef = data.total_sap;
                            const data_hpal = data.total_lim;
                            const data_total = data.x_data;

                            $("#total_ore_ytd").html(
                                data_total.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );
                            $("#total_hpal_ytd").html(
                                data_hpal.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );
                            $("#total_rkef_ytd").html(
                                data_rkef.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );




                            // var total = data_total.reduce((acc, curr) => acc + curr, 0); // Hitung total data

                            // var rkef_percentage = 0;
                            // var hpal_percentage = 0;

                            // // Periksa apakah total tidak nol sebelum menghitung persentase
                            // if (total !== 0) {
                            //     rkef_percentage = (data_rkef / total) * 100;
                            //     hpal_percentage = (data_hpal / total) * 100;
                            // }

                            // // Tampilkan persentase
                            // $("#ytd_hpal").html(
                            //     data_total.toLocaleString("en-US", { maximumFractionDigits: 2 }) +
                            //     " Total"
                            // );
                            // $("#total_hpal").html(
                            //     data_hpal.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );
                            // $("#ytd_rkef").html(
                            //     data_total.toLocaleString("en-US", { maximumFractionDigits: 2 }) +
                            //     " Total"
                            // );
                            // $("#total_rkef").html(
                            //     data_rkef.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );
                            // $("#lim_perc").css("width", hpal_percentage.toFixed(2) + "%"); // Atur lebar progres Lim
                            // $("#sap_perc").css("width", rkef_percentage.toFixed(2) + "%"); // Atur lebar progres Sap

                            // $("#total_ore_ytd").html(
                            //     data_total.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            // );

                            var data = {
                                series: [parseFloat(data.total_lim), parseFloat(data.total_sap)],
                                labels: ['HPAL', 'RKEF'],
                            };


                            this.oreTotalYtd.updateOptions({
                                labels: data.labels,
                                series: data.series,
                                colors: ["#405a88", '#ffc107', "#b9decf"],
                                // colors: ["#30638a", "#c8d1d4"],
                                // chart: {
                                //     height: 290,
                                //     type: 'donut',
                                //     background: '0',
                                //     toolbar: {
                                //         show: false
                                //     }
                                // },
                            });


                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                fetchMtdOre(filter = {}) {
                    // Your AJAX call to fetch Mtd Ore data
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-mtd-ore" %}',
                        data: filter,
                        success: (data) => {
                            const data_rkef = data.total_sap;
                            const data_hpal = data.total_lim;
                            const data_total = data.x_data;

                            $("#total_ore_mtd").html(
                                data_total.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );
                            $("#total_hpal_mtd").html(
                                data_hpal.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );
                            $("#total_rkef_mtd").html(
                                data_rkef.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );
                            var data = {
                                series: [parseFloat(data.total_lim), parseFloat(data.total_sap)],
                                labels: ['HPAL', 'RKEF'],

                            };
                            this.oreTotalMtd.updateOptions({
                                labels: data.labels,
                                series: data.series,
                                // colors: ["#ede2c0", "#b9decf"],
                                colors: ["#30638a", "#c8d1d4"],
                            });

                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                fetchMtdGrade(filter = {}) {
                    // Your AJAX call to fetch Sap data
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-grade-mtd-hpal" %}',
                        data: filter,
                        success: function (data) {
                            var data_Ni = data.hpal_Ni;
                            var data_Co = data.hpal_Co;
                            var data_Al2O3 = data.hpal_Al2O3;
                            var data_Cr2O3 = data.hpal_Cr2O3;
                            var data_Fe = data.hpal_Fe;
                            var data_Mgo = data.hpal_Mgo;
                            var data_SiO2 = data.hpal_SiO2;
                            var data_Mc = data.hpal_Mc;
                            $("#mtd_hpal_Ni").html(data_Ni);
                            $("#mtd_hpal_Co").html(data_Co);
                            $("#mtd_hpal_Al2O3").html(data_Al2O3);
                            // $("#mtd_hpal_Cr2O3").html(data_Cr2O3);
                            $("#mtd_hpal_Fe").html(data_Fe);
                            $("#mtd_hpal_Mgo").html(data_Mgo);
                            $("#mtd_hpal_SiO2").html(data_SiO2);
                            $("#mtd_hpal_Mc").html(data_Mc);
                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });

                    $.ajax({
                        type: "GET",
                        url: '{% url "get-grade-mtd-rkef" %}',
                        data: filter,
                        success: function (data) {
                            var data_Ni = data.rkef_Ni;
                            var data_Co = data.rkef_Co;
                            var data_Al2O3 = data.rkef_Al2O3;
                            var data_Cr2O3 = data.rkef_Cr2O3;
                            var data_Fe = data.rkef_Fe;
                            var data_Mgo = data.rkef_Mgo;
                            var data_SiO2 = data.rkef_SiO2;
                            var data_Mc = data.rkef_Mc;
                            $("#mtd_rkef_Ni").html(data_Ni);
                            $("#mtd_rkef_Co").html(data_Co);
                            $("#mtd_rkef_Al2O3").html(data_Al2O3);
                            // $("#mtd_rkef_Cr2O3").html(data_Cr2O3);
                            $("#mtd_rkef_Fe").html(data_Fe);
                            $("#mtd_rkef_Mgo").html(data_Mgo);
                            $("#mtd_rkef_SiO2").html(data_SiO2);
                            $("#mtd_rkef_Mc").html(data_Mc);
                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                // Function Charts to fetch data from server 
                fetchData(filter = {}) {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get_chart_data" %}', // Replace with your actual endpoint
                        data: filter,
                        success: (data) => {
                            const x_data = data.x_data;
                            const y_data_material_lim = data.y_data_material_lim;
                            const y_data_material_sap = data.y_data_material_sap;

                            this.oreYear.updateOptions({
                                series: [
                                    { name: 'HPAL', data: y_data_material_lim },
                                    { name: 'RKEF', data: y_data_material_sap }
                                ],
                                chart: {
                                    height: 320,
                                    type: 'bar',
                                    fontFamily: 'Nunito, sans-serif',
                                    toolbar: {
                                        show: false,
                                    },
                                },
                                xaxis: {
                                    categories: x_data,
                                },
                            });
                        },
                        error: (xhr, errmsg, err) => {
                            console.error("Error:", errmsg);
                        },
                    });
                },

                fetchClassOre(filter = {}) {
                    // Your AJAX call to fetch Class Ore data
                    $.ajax({
                        type: "GET",
                        url: '{% url "chart-ore-class" %}',
                        data: filter,
                        success: (data) => { // Menggunakan arrow function di sini
                            const x_data = ["LGLO", "MGLO", "HGLO", "LGSO", "MGSO", "HGSO"];
                            const y_data = data.y_data;

                            // Membuat data series
                            var seriesData = [];
                            for (var i = 0; i < x_data.length; i++) {
                                seriesData.push({
                                    x: x_data[i],
                                    y: y_data[i],
                                });
                            }
                            // Perbarui data series
                            this.oreClassYear.updateSeries([
                                {
                                    data: seriesData,
                                },
                            ]);
                        },
                        error: (xhr, errmsg, err) => {
                            console.log("Error:", errmsg);
                        },
                    });
                },

                dailyChart(filter = {}) {
                    // update daily chart
                    $.ajax({
                        type: "GET",
                        url: '{% url "chart-ore-daily" %}',
                        data: filter,
                        success: (data) => { // Menggunakan arrow function di sini
                            const x_data = data.x_data;
                            const y_data_lim = data.y_data_lim;
                            const y_data_sap = data.y_data_sap;

                            // Membuat data series untuk LIM
                            var seriesDataLIM = [];
                            for (var i = 0; i < x_data.length; i++) {
                                seriesDataLIM.push({
                                    x: x_data[i],
                                    y: y_data_lim[i],
                                });
                            }

                            // Membuat data series untuk SAP
                            var seriesDataSAP = [];
                            for (var i = 0; i < x_data.length; i++) {
                                seriesDataSAP.push({
                                    x: x_data[i],
                                    y: y_data_sap[i],
                                });
                            }
                            // Mengatur ulang data kategori dan data seri
                            this.dailyOreChart.updateOptions({
                                series: [
                                    {
                                        name: "LIM",
                                        data: seriesDataLIM,
                                    },

                                    {
                                        name: "SAP",
                                        data: seriesDataSAP,
                                    },
                                ],
                                // colors: (chartBarColors = getChartColorsArray("line-daily")),
                                colors: ['#f4c63d', '#17a2b8'],
                            });
                        },
                        error: function (error) {
                            console.error(error);
                        },
                    });
                },

                dailyChartClass(filter = {}) {
                    $.ajax({
                        type: "GET",
                        url: '{% url "chart-ore-class-daily" %}',
                        data: filter,
                        success: (data) => {
                            const x_data = ["LGLO", "MGLO", "HGLO", "LGSO", "MGSO", "HGSO"];
                            const y_data = data.y_data;
                            // Membuat data series
                            var seriesData = [];
                            for (var i = 0; i < x_data.length; i++) {
                                seriesData.push({ data: y_data[i] });
                            }
                            // Mengatur ulang data kategori dan data seri
                            this.oreClassMtd.updateOptions({
                                series: [
                                    {
                                        name: "Total",
                                        data: y_data,
                                    },
                                ],
                                chart: {
                                    height: 330,
                                    type: "bar",
                                    animations: {
                                        enabled: true,
                                        easing: "easein",
                                        speed: 800,
                                        animateGradually: {
                                            enabled: true,
                                            delay: 150,
                                        },
                                        dynamicAnimation: {
                                            enabled: true,
                                            speed: 350,
                                        },
                                    },
                                },
                                plotOptions: {
                                    bar: {
                                        borderRadius: 4,
                                        borderRadiusApplication: 'end',
                                        horizontal: true,
                                    }
                                },
                                // colors: ["#64a5af", "#02b1a4", "#f3ce04", "#87e52c"],
                                colors: ["#0d2e5d"],
                                // colors: ['#1abc9c'],
                                yaxis: {
                                    categories: [],
                                    axisBorder: {
                                        show: true,
                                        color: isDark ? '#3b3f5c' : '#e0e6ed',
                                    },
                                },
                                xaxis: {
                                    categories: x_data,
                                    tickAmount: 4,
                                    labels: {
                                        formatter: (value) => {
                                            return value / 1000 + 'K';
                                        },
                                        offsetX: isRtl ? -10 : 0,
                                        offsetY: 0,
                                        style: {
                                            fontSize: '12px',
                                            cssClass: 'apexcharts-yaxis-title',
                                        },
                                    },
                                    opposite: isRtl ? true : false,
                                },
                            });
                        },
                        error: function (error) {
                            console.error(error);
                        },
                    });
                },

                fetchforecastWeek() {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-ore-forecast-production" %}',
                        success: (data) => {
                            console.log("Data received:", data);

                            const actual = data.actual.map(value => value === null ? 0 : value); // Replace null with 0
                            const forecast = data.forecast;
                            const yhat_lower = data.yhat_lower;
                            const yhat_upper = data.yhat_upper;
                            const dates = data.dates;

                            // Ensure the arrays are not empty before using them
                            if (actual && forecast && yhat_lower && yhat_upper) {
                                this.forecastWeek.updateOptions({
                                    chart: {
                                        type: 'area',
                                        height: 350,
                                        animations: {
                                            enabled: true,
                                            easing: 'linear',
                                            dynamicAnimation: {
                                                speed: 1000
                                            }
                                        },
                                    },
                                    title: {
                                        text: 'Forecast vs Actual Data on weekly',
                                        align: 'left'
                                    },
                                    dataLabels: {
                                        enabled: false
                                    },
                                    series: [
                                        {
                                            name: 'Actual',
                                            data: actual
                                        },
                                        {
                                            name: 'Forecast',
                                            data: forecast
                                        }, {
                                            name: 'Lower Bound',
                                            data: yhat_lower
                                        }, {
                                            name: 'Upper Bound',
                                            data: yhat_upper
                                        }],
                                    xaxis: {
                                        categories: dates,
                                    },
                                    yaxis: {
                                        // categories: dates,
                                        tickAmount: 4,
                                        labels: {
                                            formatter: (value) => {
                                                // return value / 1000 + 'K';
                                                return (value / 1000).toFixed(2)
                                            },
                                            offsetX: isRtl ? -10 : 0,
                                            offsetY: 0,
                                            style: {
                                                fontSize: '12px',
                                                cssClass: 'apexcharts-yaxis-title',
                                            },
                                        },

                                    },
                                    markers: {
                                        size: 0,
                                    },
                                    fill: {
                                        type: 'gradient',
                                        gradient: {
                                            shadeIntensity: 1,
                                            inverseColors: !1,
                                            opacityFrom: isDark ? 0.19 : 0.28,
                                            opacityTo: 0.05,
                                            stops: isDark ? [100, 100] : [45, 100],
                                        },
                                    },
                                    stroke: {
                                        show: true,
                                        curve: 'smooth',
                                        width: 2,
                                        lineCap: 'square',
                                        dashArray: [0, 0, 5, 5, 5] // Gaya garis putus-putus untuk batas prediksi
                                    },
                                    tooltip: {
                                        shared: true,
                                        intersect: false
                                    }

                                });
                            } else {
                                console.error("Data arrays are incomplete");
                            }
                        },
                        error: (xhr, errmsg, err) => {
                            console.error("Error:", errmsg);
                            console.log("Response text:", xhr.responseText);  // Log the raw response
                        }
                    });
                },

                fetchStockpileHpal(filter = {}) {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-ore-stockpile-hpal" %}', // Ganti dengan endpoint yang sesuai
                        data: filter,
                        success: (data) => {
                            // Akses data_x dengan benar
                            const x_data = data.data_x[0];  // Mengakses array pertama dalam data_x
                            const y_data = data.data_y;     // Menggunakan data_y yang sudah benar
                            // console.log("Data received from server:", data); // Tambahkan log untuk memverifikasi data

                            // Pastikan x_data dan y_data memiliki panjang yang sama dan terkoordinasi dengan benar
                            if (x_data.length === y_data.length) {
                                this.stockpile_hpal.updateOptions({
                                    chart: {
                                        type: 'bar',        // Tipe chart (misalnya, line, bar, dll)
                                        height: 320,
                                    },
                                    series: [{
                                        name: 'HPAL',
                                        data: y_data // Data untuk sumbu Y
                                    }],
                                    xaxis: {
                                        categories: x_data, // Kategori untuk sumbu X
                                        labels: {
                                            rotate: -45  // Rotasi label agar lebih rapi saat ada banyak kategori
                                        },
                                        tooltip: {
                                            enabled: true
                                        }
                                    },
                                    colors: ["#405a88", '#ffc107', "#b9decf"],
                                    responsive: [
                                        {
                                            breakpoint: 320,
                                            options: {
                                                chart: {
                                                    height: 250
                                                },
                                                legend: {
                                                    position: 'bottom'
                                                }
                                            }
                                        }
                                    ]
                                });
                                // Periksa apakah konten lebih besar dari area scroll

                            } else {
                                console.error("Panjang data tidak cocok antara kategori dan nilai.");
                            }
                        },
                        error: (xhr, errmsg, err) => {
                            console.error("Error:", errmsg);
                        },
                    });
                },

                fetchStockpileRkef(filter = {}) {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-ore-stockpile-rkef" %}', // Ganti dengan endpoint yang sesuai
                        data: filter,
                        success: (data) => {
                            // Akses data_x dengan benar
                            const x_data = data.data_x[0];  // Mengakses array pertama dalam data_x
                            const y_data = data.data_y;     // Menggunakan data_y yang sudah benar
                            // console.log("Data received from server:", data); // Tambahkan log untuk memverifikasi data

                            // Pastikan x_data dan y_data memiliki panjang yang sama dan terkoordinasi dengan benar
                            if (x_data.length === y_data.length) {
                                this.stockpile_rkef.updateOptions({
                                    series: [{
                                        name: 'RKEF',
                                        data: y_data // Data untuk sumbu Y
                                    }],
                                    chart: {
                                        type: 'bar',
                                        height: 350
                                    },
                                    plotOptions: {
                                        bar: {
                                            // borderRadius: 4,
                                            borderRadiusApplication: 'end',
                                            horizontal: true,
                                        }
                                    },
                                    dataLabels: {
                                        enabled: false
                                    },
                                    xaxis: {
                                        categories: x_data, // Kategori untuk sumbu X
                                    },
                                    colors: ["#405a88", '#ffc107', "#b9decf"],
                                    responsive: [
                                        {
                                            breakpoint: 480,
                                            options: {
                                                chart: {
                                                    height: 250
                                                },
                                                legend: {
                                                    position: 'bottom'
                                                }
                                            }
                                        }
                                    ]
                                });

                            } else {
                                console.error("Panjang data tidak cocok antara kategori dan nilai.");
                            }
                        },
                        error: (xhr, errmsg, err) => {
                            console.error("Error:", errmsg);
                        },
                    });
                },

                sampleYtdChart(filter = {}) {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-ytd-sample" %}',
                        data: filter,
                        success: (data) => { // Menggunakan arrow function di sini
                            // Panggil fungsi pembuatan grafik dengan data yang diperoleh
                            const x_data = data.x_data;
                            const y_data = data.y_data;

                            this.sampleYear.updateOptions({
                                series: [{
                                    name: 'Samples',
                                    data: y_data
                                }
                                ],
                                xaxis: {
                                    categories: x_data,
                                },
                                colors: ["#405a88", '#ffc107', "#b9decf"],
                            });

                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });

                },

                sampleMtdChart(filter = {}) {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-mtd-sample" %}',
                        data: filter,
                        success: (data) => { // Menggunakan arrow function di sini
                            // Panggil fungsi pembuatan grafik dengan data yang diperoleh
                            const x_data = data.x_data;
                            const y_data = data.y_data;
                            const data_total = data.total;

                            $("#totals_samples_mtd").html(
                                data_total.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );

                            this.sampleMonth.updateOptions({
                                series: [{
                                    name: 'Samples',
                                    data: y_data
                                }
                                ],
                                xaxis: {
                                    categories: x_data,
                                },
                                colors: ['#ffc107', "#b9decf"],
                            });

                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });

                },

                sampleWeekChart() {
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-sample-this-week" %}',
                        success: (data) => { // Menggunakan arrow function di sini
                            // Panggil fungsi pembuatan grafik dengan data yang diperoleh
                            const y_data = data.y_data;
                            const data_total = data.total;

                            $("#samples_this_week").html(
                                data_total.toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );

                            this.totalSampleWeeks.updateOptions({
                                series: [{
                                    name: 'Samples',
                                    data: y_data

                                }
                                ],
                                colors: ['#009688'],
                            });

                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });
                    $.ajax({
                        type: "GET",
                        url: '{% url "get-sample-this-days" %}',
                        success: (data) => { // Menggunakan arrow function di sini
                            // Panggil fungsi pembuatan grafik dengan data yang diperoleh
                            const y_data = data.y_data;

                            $("#samples_this_day").html(
                                (y_data ?? 0).toLocaleString("en-US", { maximumFractionDigits: 2 })
                            );

                            this.sampleDays.updateOptions({
                                series: [{
                                    name: 'Samples',
                                    // data: y_data
                                    data: [21, 9, 36, 12, 44, 25, 59],
                                }],
                                colors: ['#e2a03f'],
                                chart: {
                                    height: 58,
                                    type: 'area',
                                    fontFamily: 'Nunito, sans-serif',
                                    sparkline: {
                                        enabled: true,
                                    },
                                    dropShadow: {
                                        enabled: true,
                                        blur: 3,
                                        color: '#e2a03f',
                                        opacity: 0.4,
                                    },
                                },
                            });

                        },
                        error: function (xhr, errmsg, err) {
                            console.log("Error:", errmsg);
                        },
                    });

                },

                updateChartTheme() {
                    this.oreYear.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },
                        xaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                    });
                    this.sampleYear.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },
                        xaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                    });

                    this.oreTotalYtd.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },
                        yaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                        xaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                    });

                    this.dailyOreChart.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },
                        xaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                    });
                    this.oreClassMtd.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },
                        yaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                        xaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                    });

                    this.stockpile_hpal.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },
                        xaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                    });
                    this.stockpile_rkef.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },
                        xaxis: {
                            axisBorder: { show: true, color: this.isDark ? '#3b3f5c' : '#e0e6ed' },
                        },
                    });
                    this.forecastWeek.updateOptions({
                        grid: {
                            borderColor: this.isDark ? '#191e3a' : '#e0e6ed',
                        },

                    });

                    this.totalSampleWeeks.updateOptions();

                    this.sampleDays.updateOptions(this.samplesDaysOptions);
                },

                get barOptions() {
                    return {
                        series: [
                            // { name: 'HPAL', data: [] },
                            // { name: 'RKEF', data: [] }
                        ],
                        chart: {
                            height: 360,
                            type: 'bar',
                            fontFamily: 'Nunito, sans-serif',
                            toolbar: {
                                show: false,
                            },
                        },
                        dataLabels: {
                            enabled: false,
                        },
                        stroke: {
                            width: 2,
                            colors: ['transparent'],
                        },
                        // colors: ['#5c1ac3', '#5c739a', '#ffbb44'],
                        colors: ['#ffca2c', '#5c739a', '#5c1ac3', '#ffbb44'],
                        // colors: ['#ffc107', '#546ea2', '#5c739a'],
                        dropShadow: {
                            enabled: true,
                            blur: 3,
                            color: '#515365',
                            opacity: 0.4,
                        },
                        plotOptions: {
                            bar: {
                                horizontal: false,
                                columnWidth: '70%',
                                borderRadius: 0,
                            },
                        },
                        legend: {
                            position: 'bottom',
                            horizontalAlign: 'center',
                            fontSize: '14px',
                            itemMargin: {
                                horizontal: 8,
                                vertical: 8,
                            },
                        },
                        grid: {
                            borderColor: isDark ? '#191e3a' : '#e0e6ed',
                            padding: {
                                left: 20,
                                right: 20,
                            },
                        },
                        xaxis: {
                            categories: [],
                            axisBorder: {
                                show: true,
                                color: isDark ? '#3b3f5c' : '#e0e6ed',
                            },
                        },
                        yaxis: {
                            tickAmount: 4,
                            labels: {
                                formatter: (value) => {
                                    return value / 1000 + 'K';
                                },
                                offsetX: isRtl ? -10 : 0,
                                offsetY: 0,
                                style: {
                                    fontSize: '12px',
                                    cssClass: 'apexcharts-yaxis-title',
                                },
                            },
                            opposite: isRtl ? true : false,
                        },
                        fill: {

                        },
                        tooltip: {
                            marker: {
                                show: true,
                            },
                            y: {
                                formatter: (val) => {
                                    return val;
                                },
                            },
                        },
                        noData: {
                            text: "No Data...",
                        },
                    };
                },

                get barOptionsHorizontal() {
                    return {
                        series: [],
                        chart: {
                            type: 'bar',
                            height: 320
                        },
                        grid: {
                            borderColor: isDark ? '#191e3a' : '#e0e6ed',
                            padding: {
                                left: 20,
                                right: 20,
                            },
                        },
                        dataLabels: {
                            enabled: false
                        },
                        stroke: {
                            width: 2,
                            colors: ['transparent'],
                        },
                        dropShadow: {
                            enabled: true,
                            blur: 3,
                            color: '#515365',
                            opacity: 0.4,
                        },
                        plotOptions: {
                            bar: {
                                horizontal: true,
                                columnWidth: '70%',
                                borderRadius: 0,
                            },
                        },
                        legend: {
                            position: 'bottom',
                            horizontalAlign: 'center',
                            fontSize: '14px',
                            itemMargin: {
                                horizontal: 8,
                                vertical: 8,
                            },
                        },
                        grid: {
                            borderColor: isDark ? '#191e3a' : '#e0e6ed',
                            padding: {
                                left: 20,
                                right: 20,
                            },
                        },
                        yaxis: {
                            categories: [],
                            axisBorder: {
                                show: true,
                                color: isDark ? '#3b3f5c' : '#e0e6ed',
                            },
                        },
                        xaxis: {
                            tickAmount: 4,
                            labels: {
                                formatter: (value) => {
                                    return value / 1000 + 'K';
                                },
                                offsetX: isRtl ? -10 : 0,
                                offsetY: 0,
                                style: {
                                    fontSize: '12px',
                                    cssClass: 'apexcharts-yaxis-title',
                                },
                            },
                            opposite: isRtl ? true : false,
                        },
                    };
                },

                // area chart
                get dailyChartOptions() {
                    return {
                        series: [
                            {
                                name: 'HPAL',
                                data: [],
                            },
                            {
                                name: 'REKF',
                                data: [],
                            },
                        ],
                        chart: {
                            height: 325,
                            type: 'area',
                            fontFamily: 'Nunito, sans-serif',
                            zoom: {
                                enabled: false,
                            },
                            toolbar: {
                                show: false,
                            },
                        },
                        dataLabels: {
                            enabled: false,
                        },
                        stroke: {
                            show: true,
                            curve: 'smooth',
                            width: 2,
                            lineCap: 'square',
                        },
                        dropShadow: {
                            enabled: true,
                            opacity: 0.2,
                            blur: 10,
                            left: -7,
                            top: 22,
                        },
                        //  colors: isDark ? ['#2196f3', '#e7515a'] : ['#1b55e2', '#e7515a'],
                        colors: [],
                        // markers: {
                        //     discrete: [
                        //         {
                        //             seriesIndex: 0,
                        //             dataPointIndex: 6,
                        //             fillColor: '#1b55e2',
                        //             strokeColor: 'transparent',
                        //             size: 7,
                        //         },
                        //         {
                        //             seriesIndex: 1,
                        //             dataPointIndex: 5,
                        //             fillColor: '#e7515a',
                        //             strokeColor: 'transparent',
                        //             size: 7,
                        //         },
                        //     ],
                        // },
                        labels: [],
                        xaxis: {
                            axisBorder: {
                                show: false,
                            },
                            axisTicks: {
                                show: false,
                            },
                            crosshairs: {
                                show: true,
                            },
                            labels: {
                                offsetX: isRtl ? 2 : 0,
                                offsetY: 5,
                                style: {
                                    fontSize: '12px',
                                    cssClass: 'apexcharts-xaxis-title',
                                },
                            },
                        },
                        yaxis: {
                            tickAmount: 5,
                            labels: {
                                formatter: (value) => {
                                    return value / 1000 + 'K';
                                },
                                offsetX: isRtl ? -30 : -10,
                                offsetY: 0,
                                style: {
                                    fontSize: '12px',
                                    cssClass: 'apexcharts-yaxis-title',
                                },
                            },
                            opposite: isRtl ? true : false,
                        },
                        grid: {
                            borderColor: isDark ? '#191e3a' : '#e0e6ed',
                            strokeDashArray: 0,
                            xaxis: {
                                lines: {
                                    show: false,
                                },
                            },
                            yaxis: {
                                lines: {
                                    show: true,
                                },
                            },
                            padding: {
                                top: 0,
                                right: 0,
                                bottom: 0,
                                left: 0,
                            },
                        },
                        legend: {
                            position: 'top',
                            horizontalAlign: 'right',
                            fontSize: '16px',
                            markers: {
                                width: 10,
                                height: 10,
                                offsetX: -2,
                            },
                            itemMargin: {
                                horizontal: 10,
                                vertical: 5,
                            },
                        },
                        tooltip: {
                            marker: {
                                show: true,
                            },
                            x: {
                                show: false,
                            },
                        },
                        fill: {
                            type: 'gradient',
                            gradient: {
                                shadeIntensity: 1,
                                inverseColors: !1,
                                opacityFrom: isDark ? 0.19 : 0.28,
                                opacityTo: 0.05,
                                stops: isDark ? [100, 100] : [45, 100],
                            },
                        },
                    };
                },

                // tree chart
                get oreClassOptions() {
                    return {
                        series: [
                            {
                                data: [
                                ]
                            }
                        ],
                        legend: {
                            show: false,
                        },
                        noData: {
                            text: "No data...",
                        },
                        chart: {
                            height: 320,
                            type: "treemap",
                        },
                        animations: {
                            enabled: true,
                            easing: "easeinout",
                            speed: 1500,
                            animateGradually: {
                                enabled: true,
                                delay: 150,
                            },
                            dynamicAnimation: {
                                enabled: true,
                                speed: 800,
                            },
                        },
                        // colors: [
                        //     "#588A87",
                        //     "#B6C6BE",
                        //     "#DFD9CA",
                        //     "#EFCABF",
                        //     "#EEA995",
                        //     "#E0AF61",
                        // ],
                        colors: [
                            '#3B93A5',
                            '#F7B844',
                            '#ADD8C7',
                            '#EC3C65',
                            '#CDD7B6',
                            '#C1F666',
                            '#D43F97',
                            '#1E5D8C',
                            '#421243',
                            '#7F94B0',
                            '#EF6537',
                            '#C0ADDB'
                        ],
                        plotOptions: {
                            treemap: {
                                distributed: true,
                                enableShades: false,
                            },
                        },
                    };
                },

                get donutChartOptions() {
                    return {
                        series: [],
                        chart: {
                            height: 290,
                            type: 'donut',
                            zoom: {
                                enabled: false
                            },
                            toolbar: {
                                show: false
                            }
                        },
                        stroke: {
                            show: false,
                        },
                        labels: [],
                        colors: [],
                        responsive: [{
                            breakpoint: 400,
                            options: {
                                chart: {
                                    width: 320
                                }
                            }
                        }],
                        legend: {
                            position: 'bottom',
                        },
                    }
                },

                get mixedOptions() {
                    return {
                        series: [],
                        chart: {
                            // height: 320,
                            // type: 'line',
                            // animations: {
                            //     enabled: true,
                            //     easing: 'linear',
                            //     dynamicAnimation: {
                            //         speed: 1000
                            //     }
                            // },
                            // toolbar: {
                            //     show: false
                            // },
                            // zoom: {
                            //     enabled: false,
                            // }
                        },
                        noData: {
                            text: 'No Data...'
                        },
                        stroke: {},
                        title: {},
                        dataLabels: {},
                        labels: [],
                        xaxis: {},
                        yaxis: [],
                        // colors: ["#AAC8A7", "#f3ce04", "#02b1a4", "#E48F45"],
                        // colors: ['#4e6987', '#fdc362'],
                        colors: [],
                        // tooltip: {
                        //     marker: {
                        //         show: true,
                        //     },
                        //     y: {
                        //         formatter: (val) => {
                        //             return val;
                        //         },
                        //     },
                        // },
                    };
                },

                // daily Samples
                get weekChartOptions() {
                    return {
                        series: [
                            // {
                            //     name: 'Sales',
                            //     data: [44, 55, 41, 67, 22]
                            // },
                        ],
                        chart: {
                            height: 160,
                            type: 'bar',
                            fontFamily: 'Nunito, sans-serif',
                            toolbar: {
                                show: false,
                            },
                            stacked: true,
                            stackType: '100%',
                        },
                        dataLabels: {
                            enabled: false,
                        },
                        stroke: {
                            show: true,
                            width: 1,
                        },
                        colors: ['#e2a03f', '#e0e6ed'],
                        responsive: [
                            {
                                breakpoint: 480,
                                options: {
                                    legend: {
                                        position: 'bottom',
                                        offsetX: -10,
                                        offsetY: 0,
                                    },
                                },
                            },
                        ],
                        xaxis: {
                            labels: {
                                show: false,
                            },
                            categories: [],
                        },
                        yaxis: {
                            show: false,
                        },
                        fill: {
                            opacity: 1,
                        },
                        plotOptions: {
                            bar: {
                                horizontal: false,
                                columnWidth: '25%',
                            },
                        },
                        legend: {
                            show: false,
                        },
                        grid: {
                            show: false,
                            xaxis: {
                                lines: {
                                    show: false,
                                },
                            },
                            padding: {
                                top: 10,
                                right: -20,
                                bottom: -20,
                                left: -20,
                            },
                        },
                    };
                },

                // statistics
                get sampleWeeksOptions() {
                    return {
                        series: [
                            {
                                data: [21, 9, 36, 12, 44,],
                            },
                        ],
                        chart: {
                            height: 58,
                            type: 'area',
                            fontFamily: 'Nunito, sans-serif',
                            sparkline: {
                                enabled: true,
                            },
                            dropShadow: {
                                enabled: true,
                                blur: 3,
                                color: '#009688',
                                opacity: 0.4,
                            },
                        },
                        stroke: {
                            curve: 'smooth',
                            width: 2,
                        },
                        colors: ['#009688', '#e2a03f'],
                        grid: {
                            padding: {
                                top: 5,
                                bottom: 5,
                                left: 5,
                                right: 5,
                            },
                        },
                        tooltip: {
                            x: {
                                show: false,
                            },
                            y: {
                                title: {
                                    formatter: (formatter = () => {
                                        return '';
                                    }),
                                },
                            },
                        },
                    };
                },
                get samplesDaysOptions() {
                    return {
                        series: [
                            {
                                data: [44, 12, 36, 9, 21],
                            },
                        ],
                        chart: {
                            height: 58,
                            type: 'area',
                            fontFamily: 'Nunito, sans-serif',
                            sparkline: {
                                enabled: true,
                            },
                            dropShadow: {
                                enabled: true,
                                blur: 3,
                                color: '#e2a03f',
                                opacity: 0.4,
                            },
                        },
                        stroke: {
                            curve: 'smooth',
                            width: 2,
                        },
                        colors: ['#e2a03f'],
                        grid: {
                            padding: {
                                top: 5,
                                bottom: 5,
                                left: 5,
                                right: 5,
                            },
                        },
                        tooltip: {
                            x: {
                                show: false,
                            },
                            y: {
                                title: {
                                    formatter: (formatter = () => {
                                        return '';
                                    }),
                                },
                            },
                        },
                    };
                },

            }));

        });
    </script>

</body>

</html>
<style>
    .scrollbar-sm {
        overflow-x: hidden;
        /* Scroll disembunyikan secara default */
        transition: overflow 0.3s;
        margin-top: 16px;
        margin-bottom: 16px;
    }

    .scrollbar-sm:hover {
        overflow-x: auto;
        /* Scroll muncul saat hover */
    }

    .scrollbar-sm::-webkit-scrollbar {
        height: 6px;
        /* Scroll kecil */
    }

    .scrollbar-sm::-webkit-scrollbar-thumb {
        background-color: #888;
        border-radius: 3px;
    }

    .scrollbar-sm::-webkit-scrollbar-thumb:hover {
        background-color: #555;
    }
</style>